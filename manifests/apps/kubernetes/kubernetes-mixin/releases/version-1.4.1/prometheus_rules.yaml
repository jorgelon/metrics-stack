{
  "groups": [
    {
      "interval": "3m",
      "name": "kube-apiserver-availability.rules",
      "rules": [
        {
          "expr": "avg_over_time(code_verb:apiserver_request_total:increase1h[30d]) * 24 * 30\n",
          "record": "code_verb:apiserver_request_total:increase30d"
        },
        {
          "expr": "sum by (k8s_cluster, code) (code_verb:apiserver_request_total:increase30d{verb=~\"LIST|GET\"})\n",
          "labels": {
            "verb": "read"
          },
          "record": "code:apiserver_request_total:increase30d"
        },
        {
          "expr": "sum by (k8s_cluster, code) (code_verb:apiserver_request_total:increase30d{verb=~\"POST|PUT|PATCH|DELETE\"})\n",
          "labels": {
            "verb": "write"
          },
          "record": "code:apiserver_request_total:increase30d"
        },
        {
          "expr": "sum by (k8s_cluster, verb, scope, le) (increase(apiserver_request_sli_duration_seconds_bucket[1h]))\n",
          "record": "cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase1h"
        },
        {
          "expr": "sum by (k8s_cluster, verb, scope, le) (avg_over_time(cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase1h[30d]) * 24 * 30)\n",
          "record": "cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d"
        },
        {
          "expr": "sum by (k8s_cluster, verb, scope) (cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase1h{le=\"+Inf\"})\n",
          "record": "cluster_verb_scope:apiserver_request_sli_duration_seconds_count:increase1h"
        },
        {
          "expr": "sum by (k8s_cluster, verb, scope) (cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d{le=\"+Inf\"})\n",
          "record": "cluster_verb_scope:apiserver_request_sli_duration_seconds_count:increase30d"
        },
        {
          "expr": "1 - (\n  (\n    # write too slow\n    sum by (k8s_cluster) (cluster_verb_scope:apiserver_request_sli_duration_seconds_count:increase30d{verb=~\"POST|PUT|PATCH|DELETE\"})\n    -\n    sum by (k8s_cluster) (cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d{verb=~\"POST|PUT|PATCH|DELETE\",le=~\"1(\\\\.0)?\"} or vector(0))\n  ) +\n  (\n    # read too slow\n    sum by (k8s_cluster) (cluster_verb_scope:apiserver_request_sli_duration_seconds_count:increase30d{verb=~\"LIST|GET\"})\n    -\n    (\n      sum by (k8s_cluster) (cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d{verb=~\"LIST|GET\",scope=~\"resource|\",le=~\"1(\\\\.0)?\"} or vector(0))\n      +\n      sum by (k8s_cluster) (cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d{verb=~\"LIST|GET\",scope=\"namespace\",le=~\"5(\\\\.0)?\"} or vector(0))\n      +\n      sum by (k8s_cluster) (cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d{verb=~\"LIST|GET\",scope=\"cluster\",le=~\"30(\\\\.0)?\"} or vector(0))\n    )\n  ) +\n  # errors\n  sum by (k8s_cluster) (code:apiserver_request_total:increase30d{code=~\"5..\"} or vector(0))\n)\n/\nsum by (k8s_cluster) (code:apiserver_request_total:increase30d)\n",
          "labels": {
            "verb": "all"
          },
          "record": "apiserver_request:availability30d"
        },
        {
          "expr": "1 - (\n  sum by (k8s_cluster) (cluster_verb_scope:apiserver_request_sli_duration_seconds_count:increase30d{verb=~\"LIST|GET\"})\n  -\n  (\n    # too slow\n    sum by (k8s_cluster) (cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d{verb=~\"LIST|GET\",scope=~\"resource|\",le=~\"1(\\\\.0)?\"} or vector(0))\n    +\n    sum by (k8s_cluster) (cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d{verb=~\"LIST|GET\",scope=\"namespace\",le=~\"5(\\\\.0)?\"} or vector(0))\n    +\n    sum by (k8s_cluster) (cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d{verb=~\"LIST|GET\",scope=\"cluster\",le=~\"30(\\\\.0)?\"} or vector(0))\n  )\n  +\n  # errors\n  sum by (k8s_cluster) (code:apiserver_request_total:increase30d{verb=\"read\",code=~\"5..\"} or vector(0))\n)\n/\nsum by (k8s_cluster) (code:apiserver_request_total:increase30d{verb=\"read\"})\n",
          "labels": {
            "verb": "read"
          },
          "record": "apiserver_request:availability30d"
        },
        {
          "expr": "1 - (\n  (\n    # too slow\n    sum by (k8s_cluster) (cluster_verb_scope:apiserver_request_sli_duration_seconds_count:increase30d{verb=~\"POST|PUT|PATCH|DELETE\"})\n    -\n    sum by (k8s_cluster) (cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d{verb=~\"POST|PUT|PATCH|DELETE\",le=~\"1(\\\\.0)?\"} or vector(0))\n  )\n  +\n  # errors\n  sum by (k8s_cluster) (code:apiserver_request_total:increase30d{verb=\"write\",code=~\"5..\"} or vector(0))\n)\n/\nsum by (k8s_cluster) (code:apiserver_request_total:increase30d{verb=\"write\"})\n",
          "labels": {
            "verb": "write"
          },
          "record": "apiserver_request:availability30d"
        },
        {
          "expr": "sum by (k8s_cluster,code,resource) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[5m]))\n",
          "labels": {
            "verb": "read"
          },
          "record": "code_resource:apiserver_request_total:rate5m"
        },
        {
          "expr": "sum by (k8s_cluster,code,resource) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[5m]))\n",
          "labels": {
            "verb": "write"
          },
          "record": "code_resource:apiserver_request_total:rate5m"
        },
        {
          "expr": "sum by (k8s_cluster, code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET|POST|PUT|PATCH|DELETE\",code=~\"2..\"}[1h]))\n",
          "record": "code_verb:apiserver_request_total:increase1h"
        },
        {
          "expr": "sum by (k8s_cluster, code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET|POST|PUT|PATCH|DELETE\",code=~\"3..\"}[1h]))\n",
          "record": "code_verb:apiserver_request_total:increase1h"
        },
        {
          "expr": "sum by (k8s_cluster, code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET|POST|PUT|PATCH|DELETE\",code=~\"4..\"}[1h]))\n",
          "record": "code_verb:apiserver_request_total:increase1h"
        },
        {
          "expr": "sum by (k8s_cluster, code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET|POST|PUT|PATCH|DELETE\",code=~\"5..\"}[1h]))\n",
          "record": "code_verb:apiserver_request_total:increase1h"
        }
      ]
    },
    {
      "name": "kube-apiserver-burnrate.rules",
      "rules": [
        {
          "expr": "(\n  (\n    # too slow\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_count{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\"}[1d]))\n    -\n    (\n      (\n        sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=~\"resource|\",le=~\"1(\\\\.0)?\"}[1d]))\n        or\n        vector(0)\n      )\n      +\n      sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=\"namespace\",le=~\"5(\\\\.0)?\"}[1d]))\n      +\n      sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=\"cluster\",le=~\"30(\\\\.0)?\"}[1d]))\n    )\n  )\n  +\n  # errors\n  sum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\",code=~\"5..\"}[1d]))\n)\n/\nsum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[1d]))\n",
          "labels": {
            "verb": "read"
          },
          "record": "apiserver_request:burnrate1d"
        },
        {
          "expr": "(\n  (\n    # too slow\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_count{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\"}[1h]))\n    -\n    (\n      (\n        sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=~\"resource|\",le=~\"1(\\\\.0)?\"}[1h]))\n        or\n        vector(0)\n      )\n      +\n      sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=\"namespace\",le=~\"5(\\\\.0)?\"}[1h]))\n      +\n      sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=\"cluster\",le=~\"30(\\\\.0)?\"}[1h]))\n    )\n  )\n  +\n  # errors\n  sum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\",code=~\"5..\"}[1h]))\n)\n/\nsum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[1h]))\n",
          "labels": {
            "verb": "read"
          },
          "record": "apiserver_request:burnrate1h"
        },
        {
          "expr": "(\n  (\n    # too slow\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_count{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\"}[2h]))\n    -\n    (\n      (\n        sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=~\"resource|\",le=~\"1(\\\\.0)?\"}[2h]))\n        or\n        vector(0)\n      )\n      +\n      sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=\"namespace\",le=~\"5(\\\\.0)?\"}[2h]))\n      +\n      sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=\"cluster\",le=~\"30(\\\\.0)?\"}[2h]))\n    )\n  )\n  +\n  # errors\n  sum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\",code=~\"5..\"}[2h]))\n)\n/\nsum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[2h]))\n",
          "labels": {
            "verb": "read"
          },
          "record": "apiserver_request:burnrate2h"
        },
        {
          "expr": "(\n  (\n    # too slow\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_count{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\"}[30m]))\n    -\n    (\n      (\n        sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=~\"resource|\",le=~\"1(\\\\.0)?\"}[30m]))\n        or\n        vector(0)\n      )\n      +\n      sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=\"namespace\",le=~\"5(\\\\.0)?\"}[30m]))\n      +\n      sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=\"cluster\",le=~\"30(\\\\.0)?\"}[30m]))\n    )\n  )\n  +\n  # errors\n  sum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\",code=~\"5..\"}[30m]))\n)\n/\nsum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[30m]))\n",
          "labels": {
            "verb": "read"
          },
          "record": "apiserver_request:burnrate30m"
        },
        {
          "expr": "(\n  (\n    # too slow\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_count{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\"}[3d]))\n    -\n    (\n      (\n        sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=~\"resource|\",le=~\"1(\\\\.0)?\"}[3d]))\n        or\n        vector(0)\n      )\n      +\n      sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=\"namespace\",le=~\"5(\\\\.0)?\"}[3d]))\n      +\n      sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=\"cluster\",le=~\"30(\\\\.0)?\"}[3d]))\n    )\n  )\n  +\n  # errors\n  sum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\",code=~\"5..\"}[3d]))\n)\n/\nsum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[3d]))\n",
          "labels": {
            "verb": "read"
          },
          "record": "apiserver_request:burnrate3d"
        },
        {
          "expr": "(\n  (\n    # too slow\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_count{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\"}[5m]))\n    -\n    (\n      (\n        sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=~\"resource|\",le=~\"1(\\\\.0)?\"}[5m]))\n        or\n        vector(0)\n      )\n      +\n      sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=\"namespace\",le=~\"5(\\\\.0)?\"}[5m]))\n      +\n      sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=\"cluster\",le=~\"30(\\\\.0)?\"}[5m]))\n    )\n  )\n  +\n  # errors\n  sum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\",code=~\"5..\"}[5m]))\n)\n/\nsum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[5m]))\n",
          "labels": {
            "verb": "read"
          },
          "record": "apiserver_request:burnrate5m"
        },
        {
          "expr": "(\n  (\n    # too slow\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_count{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\"}[6h]))\n    -\n    (\n      (\n        sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=~\"resource|\",le=~\"1(\\\\.0)?\"}[6h]))\n        or\n        vector(0)\n      )\n      +\n      sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=\"namespace\",le=~\"5(\\\\.0)?\"}[6h]))\n      +\n      sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\",scope=\"cluster\",le=~\"30(\\\\.0)?\"}[6h]))\n    )\n  )\n  +\n  # errors\n  sum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\",code=~\"5..\"}[6h]))\n)\n/\nsum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[6h]))\n",
          "labels": {
            "verb": "read"
          },
          "record": "apiserver_request:burnrate6h"
        },
        {
          "expr": "(\n  (\n    # too slow\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_count{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",subresource!~\"proxy|attach|log|exec|portforward\"}[1d]))\n    -\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",subresource!~\"proxy|attach|log|exec|portforward\",le=~\"1(\\\\.0)?\"}[1d]))\n  )\n  +\n  sum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",code=~\"5..\"}[1d]))\n)\n/\nsum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[1d]))\n",
          "labels": {
            "verb": "write"
          },
          "record": "apiserver_request:burnrate1d"
        },
        {
          "expr": "(\n  (\n    # too slow\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_count{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",subresource!~\"proxy|attach|log|exec|portforward\"}[1h]))\n    -\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",subresource!~\"proxy|attach|log|exec|portforward\",le=~\"1(\\\\.0)?\"}[1h]))\n  )\n  +\n  sum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",code=~\"5..\"}[1h]))\n)\n/\nsum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[1h]))\n",
          "labels": {
            "verb": "write"
          },
          "record": "apiserver_request:burnrate1h"
        },
        {
          "expr": "(\n  (\n    # too slow\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_count{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",subresource!~\"proxy|attach|log|exec|portforward\"}[2h]))\n    -\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",subresource!~\"proxy|attach|log|exec|portforward\",le=~\"1(\\\\.0)?\"}[2h]))\n  )\n  +\n  sum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",code=~\"5..\"}[2h]))\n)\n/\nsum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[2h]))\n",
          "labels": {
            "verb": "write"
          },
          "record": "apiserver_request:burnrate2h"
        },
        {
          "expr": "(\n  (\n    # too slow\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_count{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",subresource!~\"proxy|attach|log|exec|portforward\"}[30m]))\n    -\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",subresource!~\"proxy|attach|log|exec|portforward\",le=~\"1(\\\\.0)?\"}[30m]))\n  )\n  +\n  sum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",code=~\"5..\"}[30m]))\n)\n/\nsum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[30m]))\n",
          "labels": {
            "verb": "write"
          },
          "record": "apiserver_request:burnrate30m"
        },
        {
          "expr": "(\n  (\n    # too slow\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_count{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",subresource!~\"proxy|attach|log|exec|portforward\"}[3d]))\n    -\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",subresource!~\"proxy|attach|log|exec|portforward\",le=~\"1(\\\\.0)?\"}[3d]))\n  )\n  +\n  sum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",code=~\"5..\"}[3d]))\n)\n/\nsum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[3d]))\n",
          "labels": {
            "verb": "write"
          },
          "record": "apiserver_request:burnrate3d"
        },
        {
          "expr": "(\n  (\n    # too slow\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_count{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",subresource!~\"proxy|attach|log|exec|portforward\"}[5m]))\n    -\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",subresource!~\"proxy|attach|log|exec|portforward\",le=~\"1(\\\\.0)?\"}[5m]))\n  )\n  +\n  sum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",code=~\"5..\"}[5m]))\n)\n/\nsum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[5m]))\n",
          "labels": {
            "verb": "write"
          },
          "record": "apiserver_request:burnrate5m"
        },
        {
          "expr": "(\n  (\n    # too slow\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_count{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",subresource!~\"proxy|attach|log|exec|portforward\"}[6h]))\n    -\n    sum by (k8s_cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",subresource!~\"proxy|attach|log|exec|portforward\",le=~\"1(\\\\.0)?\"}[6h]))\n  )\n  +\n  sum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",code=~\"5..\"}[6h]))\n)\n/\nsum by (k8s_cluster) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[6h]))\n",
          "labels": {
            "verb": "write"
          },
          "record": "apiserver_request:burnrate6h"
        }
      ]
    },
    {
      "name": "kube-apiserver-histogram.rules",
      "rules": [
        {
          "expr": "histogram_quantile(0.99, sum by (k8s_cluster, le, resource) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\"}[5m]))) > 0\n",
          "labels": {
            "quantile": "0.99",
            "verb": "read"
          },
          "record": "cluster_quantile:apiserver_request_sli_duration_seconds:histogram_quantile"
        },
        {
          "expr": "histogram_quantile(0.99, sum by (k8s_cluster, le, resource) (rate(apiserver_request_sli_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",subresource!~\"proxy|attach|log|exec|portforward\"}[5m]))) > 0\n",
          "labels": {
            "quantile": "0.99",
            "verb": "write"
          },
          "record": "cluster_quantile:apiserver_request_sli_duration_seconds:histogram_quantile"
        }
      ]
    },
    {
      "name": "k8s.rules.container_cpu_usage_seconds_total",
      "rules": [
        {
          "expr": "sum by (k8s_cluster, namespace, pod, container) (\n  rate(container_cpu_usage_seconds_total{job=\"cadvisor\", image!=\"\"}[5m])\n) * on (k8s_cluster, namespace, pod) group_left(node) topk by (k8s_cluster, namespace, pod) (\n  1, max by(k8s_cluster, namespace, pod, node) (kube_pod_info{node!=\"\"})\n)\n",
          "record": "node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate5m"
        },
        {
          "expr": "sum by (k8s_cluster, namespace, pod, container) (\n  irate(container_cpu_usage_seconds_total{job=\"cadvisor\", image!=\"\"}[5m])\n) * on (k8s_cluster, namespace, pod) group_left(node) topk by (k8s_cluster, namespace, pod) (\n  1, max by(k8s_cluster, namespace, pod, node) (kube_pod_info{node!=\"\"})\n)\n",
          "record": "node_namespace_pod_container:container_cpu_usage_seconds_total:sum_irate"
        }
      ]
    },
    {
      "name": "k8s.rules.container_memory_working_set_bytes",
      "rules": [
        {
          "expr": "container_memory_working_set_bytes{job=\"cadvisor\", image!=\"\"}\n* on (k8s_cluster, namespace, pod) group_left(node) topk by(k8s_cluster, namespace, pod) (1,\n  max by(k8s_cluster, namespace, pod, node) (kube_pod_info{node!=\"\"})\n)\n",
          "record": "node_namespace_pod_container:container_memory_working_set_bytes"
        }
      ]
    },
    {
      "name": "k8s.rules.container_memory_rss",
      "rules": [
        {
          "expr": "container_memory_rss{job=\"cadvisor\", image!=\"\"}\n* on (k8s_cluster, namespace, pod) group_left(node) topk by(k8s_cluster, namespace, pod) (1,\n  max by(k8s_cluster, namespace, pod, node) (kube_pod_info{node!=\"\"})\n)\n",
          "record": "node_namespace_pod_container:container_memory_rss"
        }
      ]
    },
    {
      "name": "k8s.rules.container_memory_cache",
      "rules": [
        {
          "expr": "container_memory_cache{job=\"cadvisor\", image!=\"\"}\n* on (k8s_cluster, namespace, pod) group_left(node) topk by(k8s_cluster, namespace, pod) (1,\n  max by(k8s_cluster, namespace, pod, node) (kube_pod_info{node!=\"\"})\n)\n",
          "record": "node_namespace_pod_container:container_memory_cache"
        }
      ]
    },
    {
      "name": "k8s.rules.container_memory_swap",
      "rules": [
        {
          "expr": "container_memory_swap{job=\"cadvisor\", image!=\"\"}\n* on (k8s_cluster, namespace, pod) group_left(node) topk by(k8s_cluster, namespace, pod) (1,\n  max by(k8s_cluster, namespace, pod, node) (kube_pod_info{node!=\"\"})\n)\n",
          "record": "node_namespace_pod_container:container_memory_swap"
        }
      ]
    },
    {
      "name": "k8s.rules.container_memory_requests",
      "rules": [
        {
          "expr": "kube_pod_container_resource_requests{resource=\"memory\",job=\"kube-state-metrics\"}  * on (namespace, pod, k8s_cluster)\ngroup_left() max by (namespace, pod, k8s_cluster) (\n  (kube_pod_status_phase{phase=~\"Pending|Running\"} == 1)\n)\n",
          "record": "cluster:namespace:pod_memory:active:kube_pod_container_resource_requests"
        },
        {
          "expr": "sum by (namespace, k8s_cluster) (\n    sum by (namespace, pod, k8s_cluster) (\n        max by (namespace, pod, container, k8s_cluster) (\n          kube_pod_container_resource_requests{resource=\"memory\",job=\"kube-state-metrics\"}\n        ) * on(namespace, pod, k8s_cluster) group_left() max by (namespace, pod, k8s_cluster) (\n          kube_pod_status_phase{phase=~\"Pending|Running\"} == 1\n        )\n    )\n)\n",
          "record": "namespace_memory:kube_pod_container_resource_requests:sum"
        }
      ]
    },
    {
      "name": "k8s.rules.container_cpu_requests",
      "rules": [
        {
          "expr": "kube_pod_container_resource_requests{resource=\"cpu\",job=\"kube-state-metrics\"}  * on (namespace, pod, k8s_cluster)\ngroup_left() max by (namespace, pod, k8s_cluster) (\n  (kube_pod_status_phase{phase=~\"Pending|Running\"} == 1)\n)\n",
          "record": "cluster:namespace:pod_cpu:active:kube_pod_container_resource_requests"
        },
        {
          "expr": "sum by (namespace, k8s_cluster) (\n    sum by (namespace, pod, k8s_cluster) (\n        max by (namespace, pod, container, k8s_cluster) (\n          kube_pod_container_resource_requests{resource=\"cpu\",job=\"kube-state-metrics\"}\n        ) * on(namespace, pod, k8s_cluster) group_left() max by (namespace, pod, k8s_cluster) (\n          kube_pod_status_phase{phase=~\"Pending|Running\"} == 1\n        )\n    )\n)\n",
          "record": "namespace_cpu:kube_pod_container_resource_requests:sum"
        }
      ]
    },
    {
      "name": "k8s.rules.container_memory_limits",
      "rules": [
        {
          "expr": "kube_pod_container_resource_limits{resource=\"memory\",job=\"kube-state-metrics\"}  * on (namespace, pod, k8s_cluster)\ngroup_left() max by (namespace, pod, k8s_cluster) (\n  (kube_pod_status_phase{phase=~\"Pending|Running\"} == 1)\n)\n",
          "record": "cluster:namespace:pod_memory:active:kube_pod_container_resource_limits"
        },
        {
          "expr": "sum by (namespace, k8s_cluster) (\n    sum by (namespace, pod, k8s_cluster) (\n        max by (namespace, pod, container, k8s_cluster) (\n          kube_pod_container_resource_limits{resource=\"memory\",job=\"kube-state-metrics\"}\n        ) * on(namespace, pod, k8s_cluster) group_left() max by (namespace, pod, k8s_cluster) (\n          kube_pod_status_phase{phase=~\"Pending|Running\"} == 1\n        )\n    )\n)\n",
          "record": "namespace_memory:kube_pod_container_resource_limits:sum"
        }
      ]
    },
    {
      "name": "k8s.rules.container_cpu_limits",
      "rules": [
        {
          "expr": "kube_pod_container_resource_limits{resource=\"cpu\",job=\"kube-state-metrics\"}  * on (namespace, pod, k8s_cluster)\ngroup_left() max by (namespace, pod, k8s_cluster) (\n  (kube_pod_status_phase{phase=~\"Pending|Running\"} == 1)\n)\n",
          "record": "cluster:namespace:pod_cpu:active:kube_pod_container_resource_limits"
        },
        {
          "expr": "sum by (namespace, k8s_cluster) (\n    sum by (namespace, pod, k8s_cluster) (\n        max by (namespace, pod, container, k8s_cluster) (\n          kube_pod_container_resource_limits{resource=\"cpu\",job=\"kube-state-metrics\"}\n        ) * on(namespace, pod, k8s_cluster) group_left() max by (namespace, pod, k8s_cluster) (\n          kube_pod_status_phase{phase=~\"Pending|Running\"} == 1\n        )\n    )\n)\n",
          "record": "namespace_cpu:kube_pod_container_resource_limits:sum"
        }
      ]
    },
    {
      "name": "k8s.rules.pod_owner",
      "rules": [
        {
          "expr": "max by (k8s_cluster, namespace, workload, pod) (\n  label_replace(\n    label_replace(\n      kube_pod_owner{job=\"kube-state-metrics\", owner_kind=\"ReplicaSet\"},\n      \"replicaset\", \"$1\", \"owner_name\", \"(.*)\"\n    ) * on (k8s_cluster, replicaset, namespace) group_left(owner_name) topk by(k8s_cluster, replicaset, namespace) (\n      1, max by (k8s_cluster, replicaset, namespace, owner_name) (\n        kube_replicaset_owner{job=\"kube-state-metrics\", owner_kind=\"\"}\n      )\n    ),\n    \"workload\", \"$1\", \"replicaset\", \"(.*)\"\n  )\n)\n",
          "labels": {
            "workload_type": "replicaset"
          },
          "record": "namespace_workload_pod:kube_pod_owner:relabel"
        },
        {
          "expr": "max by (k8s_cluster, namespace, workload, pod) (\n  label_replace(\n    label_replace(\n      kube_pod_owner{job=\"kube-state-metrics\", owner_kind=\"ReplicaSet\"},\n      \"replicaset\", \"$1\", \"owner_name\", \"(.*)\"\n    ) * on(replicaset, namespace, k8s_cluster) group_left(owner_name) topk by(k8s_cluster, replicaset, namespace) (\n      1, max by (k8s_cluster, replicaset, namespace, owner_name) (\n        kube_replicaset_owner{job=\"kube-state-metrics\", owner_kind=\"Deployment\"}\n      )\n    ),\n    \"workload\", \"$1\", \"owner_name\", \"(.*)\"\n  )\n)\n",
          "labels": {
            "workload_type": "deployment"
          },
          "record": "namespace_workload_pod:kube_pod_owner:relabel"
        },
        {
          "expr": "max by (k8s_cluster, namespace, workload, pod) (\n  label_replace(\n    kube_pod_owner{job=\"kube-state-metrics\", owner_kind=\"DaemonSet\"},\n    \"workload\", \"$1\", \"owner_name\", \"(.*)\"\n  )\n)\n",
          "labels": {
            "workload_type": "daemonset"
          },
          "record": "namespace_workload_pod:kube_pod_owner:relabel"
        },
        {
          "expr": "max by (k8s_cluster, namespace, workload, pod) (\n  label_replace(\n    kube_pod_owner{job=\"kube-state-metrics\", owner_kind=\"StatefulSet\"},\n  \"workload\", \"$1\", \"owner_name\", \"(.*)\")\n)\n",
          "labels": {
            "workload_type": "statefulset"
          },
          "record": "namespace_workload_pod:kube_pod_owner:relabel"
        },
        {
          "expr": "group by (k8s_cluster, namespace, workload, pod) (\n  label_join(\n    group by (k8s_cluster, namespace, job_name, pod, owner_name) (\n      label_join(\n        kube_pod_owner{job=\"kube-state-metrics\", owner_kind=\"Job\"}\n      , \"job_name\", \"\", \"owner_name\")\n    )\n    * on (k8s_cluster, namespace, job_name) group_left()\n    group by (k8s_cluster, namespace, job_name) (\n      kube_job_owner{job=\"kube-state-metrics\", owner_kind=~\"Pod|\"}\n    )\n  , \"workload\", \"\", \"owner_name\")\n)\n",
          "labels": {
            "workload_type": "job"
          },
          "record": "namespace_workload_pod:kube_pod_owner:relabel"
        },
        {
          "expr": "max by (k8s_cluster, namespace, workload, pod) (\n  label_replace(\n    kube_pod_owner{job=\"kube-state-metrics\", owner_kind=\"\", owner_name=\"\"},\n  \"workload\", \"$1\", \"pod\", \"(.+)\")\n)\n",
          "labels": {
            "workload_type": "barepod"
          },
          "record": "namespace_workload_pod:kube_pod_owner:relabel"
        },
        {
          "expr": "max by (k8s_cluster, namespace, workload, pod) (\n  label_replace(\n    kube_pod_owner{job=\"kube-state-metrics\", owner_kind=\"Node\"},\n  \"workload\", \"$1\", \"pod\", \"(.+)\")\n)\n",
          "labels": {
            "workload_type": "staticpod"
          },
          "record": "namespace_workload_pod:kube_pod_owner:relabel"
        },
        {
          "expr": "group by (k8s_cluster, namespace, workload, workload_type, pod) (\n  label_join(\n    label_join(\n      group by (k8s_cluster, namespace, job_name, pod) (\n        label_join(\n          kube_pod_owner{job=\"kube-state-metrics\", owner_kind=\"Job\"}\n        , \"job_name\", \"\", \"owner_name\")\n      )\n      * on (k8s_cluster, namespace, job_name) group_left(owner_kind, owner_name)\n      group by (k8s_cluster, namespace, job_name, owner_kind, owner_name) (\n        kube_job_owner{job=\"kube-state-metrics\", owner_kind!=\"Pod\", owner_kind!=\"\"}\n      )\n    , \"workload\", \"\", \"owner_name\")\n  , \"workload_type\", \"\", \"owner_kind\")\n\n  OR\n\n  label_replace(\n    label_replace(\n      label_replace(\n        kube_pod_owner{job=\"kube-state-metrics\", owner_kind=\"ReplicaSet\"}\n        , \"replicaset\", \"$1\", \"owner_name\", \"(.+)\"\n      )\n      * on(k8s_cluster, namespace, replicaset) group_left(owner_kind, owner_name)\n      group by (k8s_cluster, namespace, replicaset, owner_kind, owner_name) (\n        kube_replicaset_owner{job=\"kube-state-metrics\", owner_kind!=\"Deployment\", owner_kind!=\"\"}\n      )\n    , \"workload\", \"$1\", \"owner_name\", \"(.+)\")\n    OR\n    label_replace(\n      group by (k8s_cluster, namespace, pod, owner_name, owner_kind) (\n        kube_pod_owner{job=\"kube-state-metrics\", owner_kind!=\"ReplicaSet\", owner_kind!=\"DaemonSet\", owner_kind!=\"StatefulSet\", owner_kind!=\"Job\", owner_kind!=\"Node\", owner_kind!=\"\"}\n      )\n      , \"workload\", \"$1\", \"owner_name\", \"(.+)\"\n    )\n  , \"workload_type\", \"$1\", \"owner_kind\", \"(.+)\")\n)\n",
          "record": "namespace_workload_pod:kube_pod_owner:relabel"
        }
      ]
    },
    {
      "name": "kube-scheduler.rules",
      "rules": [
        {
          "expr": "histogram_quantile(0.99, sum(rate(scheduler_scheduling_attempt_duration_seconds_bucket{job=\"kube-scheduler\"}[5m])) without(instance, pod))\n",
          "labels": {
            "quantile": "0.99"
          },
          "record": "cluster_quantile:scheduler_scheduling_attempt_duration_seconds:histogram_quantile"
        },
        {
          "expr": "histogram_quantile(0.99, sum(rate(scheduler_scheduling_algorithm_duration_seconds_bucket{job=\"kube-scheduler\"}[5m])) without(instance, pod))\n",
          "labels": {
            "quantile": "0.99"
          },
          "record": "cluster_quantile:scheduler_scheduling_algorithm_duration_seconds:histogram_quantile"
        },
        {
          "expr": "histogram_quantile(0.99, sum(rate(scheduler_pod_scheduling_sli_duration_seconds_bucket{job=\"kube-scheduler\"}[5m])) without(instance, pod))\n",
          "labels": {
            "quantile": "0.99"
          },
          "record": "cluster_quantile:scheduler_pod_scheduling_sli_duration_seconds:histogram_quantile"
        },
        {
          "expr": "histogram_quantile(0.9, sum(rate(scheduler_scheduling_attempt_duration_seconds_bucket{job=\"kube-scheduler\"}[5m])) without(instance, pod))\n",
          "labels": {
            "quantile": "0.9"
          },
          "record": "cluster_quantile:scheduler_scheduling_attempt_duration_seconds:histogram_quantile"
        },
        {
          "expr": "histogram_quantile(0.9, sum(rate(scheduler_scheduling_algorithm_duration_seconds_bucket{job=\"kube-scheduler\"}[5m])) without(instance, pod))\n",
          "labels": {
            "quantile": "0.9"
          },
          "record": "cluster_quantile:scheduler_scheduling_algorithm_duration_seconds:histogram_quantile"
        },
        {
          "expr": "histogram_quantile(0.9, sum(rate(scheduler_pod_scheduling_sli_duration_seconds_bucket{job=\"kube-scheduler\"}[5m])) without(instance, pod))\n",
          "labels": {
            "quantile": "0.9"
          },
          "record": "cluster_quantile:scheduler_pod_scheduling_sli_duration_seconds:histogram_quantile"
        },
        {
          "expr": "histogram_quantile(0.5, sum(rate(scheduler_scheduling_attempt_duration_seconds_bucket{job=\"kube-scheduler\"}[5m])) without(instance, pod))\n",
          "labels": {
            "quantile": "0.5"
          },
          "record": "cluster_quantile:scheduler_scheduling_attempt_duration_seconds:histogram_quantile"
        },
        {
          "expr": "histogram_quantile(0.5, sum(rate(scheduler_scheduling_algorithm_duration_seconds_bucket{job=\"kube-scheduler\"}[5m])) without(instance, pod))\n",
          "labels": {
            "quantile": "0.5"
          },
          "record": "cluster_quantile:scheduler_scheduling_algorithm_duration_seconds:histogram_quantile"
        },
        {
          "expr": "histogram_quantile(0.5, sum(rate(scheduler_pod_scheduling_sli_duration_seconds_bucket{job=\"kube-scheduler\"}[5m])) without(instance, pod))\n",
          "labels": {
            "quantile": "0.5"
          },
          "record": "cluster_quantile:scheduler_pod_scheduling_sli_duration_seconds:histogram_quantile"
        }
      ]
    },
    {
      "name": "node.rules",
      "rules": [
        {
          "expr": "topk by(k8s_cluster, namespace, pod) (1,\n  max by (k8s_cluster, node, namespace, pod) (\n    label_replace(kube_pod_info{job=\"kube-state-metrics\",node!=\"\"}, \"pod\", \"$1\", \"pod\", \"(.*)\")\n))\n",
          "record": "node_namespace_pod:kube_pod_info:"
        },
        {
          "expr": "count by (k8s_cluster, node) (\n  node_cpu_seconds_total{mode=\"idle\",job=\"node-exporter\"}\n  * on (k8s_cluster, namespace, pod) group_left(node)\n  topk by(k8s_cluster, namespace, pod) (1, node_namespace_pod:kube_pod_info:)\n)\n",
          "record": "node:node_num_cpu:sum"
        },
        {
          "expr": "sum(\n  node_memory_MemAvailable_bytes{job=\"node-exporter\"} or\n  (\n    node_memory_Buffers_bytes{job=\"node-exporter\"} +\n    node_memory_Cached_bytes{job=\"node-exporter\"} +\n    node_memory_MemFree_bytes{job=\"node-exporter\"} +\n    node_memory_Slab_bytes{job=\"node-exporter\"}\n  )\n) by (k8s_cluster)\n",
          "record": ":node_memory_MemAvailable_bytes:sum"
        },
        {
          "expr": "avg by (k8s_cluster, node) (\n  sum without (mode) (\n    rate(node_cpu_seconds_total{mode!=\"idle\",mode!=\"iowait\",mode!=\"steal\",job=\"node-exporter\"}[5m])\n  )\n)\n",
          "record": "node:node_cpu_utilization:ratio_rate5m"
        },
        {
          "expr": "avg by (k8s_cluster) (\n  node:node_cpu_utilization:ratio_rate5m\n)\n",
          "record": "cluster:node_cpu:ratio_rate5m"
        }
      ]
    },
    {
      "name": "kubelet.rules",
      "rules": [
        {
          "expr": "histogram_quantile(\n  0.99,\n  sum(rate(kubelet_pleg_relist_duration_seconds_bucket{job=\"kubelet\"}[5m])) by (k8s_cluster, instance, le)\n  * on(k8s_cluster, instance) group_left (node)\n  max by (k8s_cluster, instance, node) (kubelet_node_name{job=\"kubelet\"})\n)\n",
          "labels": {
            "quantile": "0.99"
          },
          "record": "node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile"
        },
        {
          "expr": "histogram_quantile(\n  0.9,\n  sum(rate(kubelet_pleg_relist_duration_seconds_bucket{job=\"kubelet\"}[5m])) by (k8s_cluster, instance, le)\n  * on(k8s_cluster, instance) group_left (node)\n  max by (k8s_cluster, instance, node) (kubelet_node_name{job=\"kubelet\"})\n)\n",
          "labels": {
            "quantile": "0.9"
          },
          "record": "node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile"
        },
        {
          "expr": "histogram_quantile(\n  0.5,\n  sum(rate(kubelet_pleg_relist_duration_seconds_bucket{job=\"kubelet\"}[5m])) by (k8s_cluster, instance, le)\n  * on(k8s_cluster, instance) group_left (node)\n  max by (k8s_cluster, instance, node) (kubelet_node_name{job=\"kubelet\"})\n)\n",
          "labels": {
            "quantile": "0.5"
          },
          "record": "node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile"
        }
      ]
    }
  ]
}
